<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>调试器适用场景 - Untitled</title>
    
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"id":"Jrymro","sha":"164504e743217af9f2c75534a7496bb2b403bd27","summary":[{"title":"","articles":[{"title":"安装说明","ref":"installation.md","path":"installation.html","metadata":{"mtime":"2021-08-26T04:02:01+00:00"},"children":[{"title":"tracker服务端","ref":"installation\/server.md","path":"installation\/server.html","metadata":{"mtime":"2020-10-01T02:43:42+00:00"},"children":[{"title":"数据存储","ref":"installation\/server\/data-storage.md","path":"installation\/server\/data-storage.html","metadata":{"mtime":"2020-03-05T02:13:12+00:00"}},{"title":"更换数据存储配置","ref":"change-db.md","path":"change-db.html","metadata":{"mtime":"2020-09-23T06:27:02+00:00"}},{"title":"Server管理","ref":"installation\/server\/manage.md","path":"installation\/server\/manage.html","metadata":{"mtime":"2020-02-28T03:05:17+00:00"}},{"title":"数据清理","ref":"installation\/clean-log.md","path":"installation\/clean-log.html","metadata":{"mtime":"2021-08-25T06:03:28+00:00"}}]},{"title":"tracker客户端","ref":"installation\/client.md","path":"installation\/client.html","metadata":{"mtime":"2021-08-26T04:02:01+00:00"},"children":[{"title":"系统配置","ref":"installation\/client\/agent-config.md","path":"installation\/client\/agent-config.html","metadata":{"mtime":"2020-09-17T11:29:08+00:00"}},{"title":"自定义配置","ref":"installation\/client\/user-config.md","path":"installation\/client\/user-config.html","metadata":{"mtime":"2021-09-06T02:37:48+00:00"}},{"title":"链路追踪扩展","ref":"installation\/client\/trace_tlist.md","path":"installation\/client\/trace_tlist.html","metadata":{"mtime":"2021-09-06T02:37:48+00:00"}}]},{"title":"上报监控数据","ref":"installation\/reprot.md","path":"installation\/reprot.html","metadata":{"mtime":"2021-09-08T09:58:59+00:00"}}]},{"title":"名词解释","ref":"noun-interpretation.md","path":"noun-interpretation.html","metadata":{"mtime":"2019-09-27T03:11:51+00:00"}},{"title":"常见问题","ref":"qa.md","path":"qa.html","metadata":{"mtime":"2021-01-02T10:50:19+00:00"}},{"title":"首页","ref":"application-list.md","path":"application-list.html","metadata":{"mtime":"2019-10-15T03:54:15+00:00"}},{"title":"调用统计","ref":"application-monitoring.md","path":"application-monitoring.html","metadata":{"mtime":"2021-10-20T15:55:23+08:00"}},{"title":"链路追踪","ref":"application-tracking.md","path":"application-tracking.html","metadata":{"mtime":"2021-10-20T15:55:23+08:00"}},{"title":"调试器适用场景","ref":"debug-explain.md","path":"debug-explain.html","metadata":{"mtime":"2020-09-23T07:46:06+00:00"}},{"title":"调试器","ref":"debuger.md","path":"debuger.html"},{"title":"免费内存检测工具","ref":"leak.md","path":"leak.html"},{"title":"Agent列表","ref":"agent-list.md","path":"agent-list.html"},{"title":"机器信息","ref":"sysinfo.md","path":"sysinfo.html"},{"title":"报警管理","ref":"alert.md","path":"alert.html"},{"title":"项目管理","ref":"project.md","path":"project.html"},{"title":"应用管理","ref":"module.md","path":"module.html"},{"title":"接口管理","ref":"interface.md","path":"interface.html"},{"title":"用户管理","ref":"user.md","path":"user.html","children":[{"title":"第三方登录","ref":"user\/oauth-login.md","path":"user\/oauth-login.html"}]},{"title":"对外开放API","ref":"api.md","path":"api.html"},{"title":"联系我们","ref":"contact-us.md","path":"contact-us.html"}]}],"config":{"plugins":["highlight","image-zoom"],"pluginsConfig":{"highlight":{"defaultLanguage":"markup"},"theme-default":{"show_nav":true,"logo":{"image":"https:\/\/img.kancloud.cn\/4e\/45\/4e45172f86ac746e40eb69c2827ae271_157x77.png","url":"https:\/\/business.swoole.com\/"}}},"themeConfig":{"expandLevel":1,"navs":[{"title":"Swoole Tracker 详细手册","url":"http:\/\/wiki.tracker.swoole-cloud.com"},{"title":"基础手册","url":"http:\/\/base-wiki.tracker.swoole-cloud.com"}]}},"file":{"path":"debug-explain.html","content":"Tracker的调试工具链目前有4种，分别是`性能分析`、`阻塞检测`、`内存泄漏`、`查看当前调用栈`。\n\n经常有人问它们的适用场景以及区别，在此予以说明：\n\n## 内存泄漏\n\n是用在 Swoole、Workerman 等常驻进程模式下的工具，在 FPM 下是不存在内存泄漏一说的，它能帮助你检查这种情况：\n\n在请求开始后向某一个全局变量（`$GLOBALS`或者类的静态属性等）追加内容，并且在请求结束的时候追加在全局变量的内容没有被`unset`掉，那么就认为有内存泄漏。\n\n>[info] 请求开始和请求结束可以通过调用`Tracker API`来指定，具体参考「[调试器](debuger.md)」章节`手动埋点调试`。\n\n## 阻塞检测\n\n阻塞检测工具的准确的来说应该叫做`阻塞系统调用检测工具`，它的原理是拦截进程的所有系统调用，在开始和结束打点取时间差，如果大于配置的时间（默认`10ms`）就把当前的 PHP 调用堆栈上报到 Tracker 的后台，可以方便的定位到调用栈阻塞在哪个系统调用，耗时多少毫秒，通过具体的系统调用我们能判断出进程是锁等待、还是磁盘 IO 问题、网络 IO 问题等。\n\n但是这个工具无法检测出卡死的问题，具体可以参考微课程的这篇文章[教你秒级定位PHP卡死问题](https:\/\/course.swoole-cloud.com\/article\/2)\n\n## 查看当前调用栈\n\n对于阻塞检测工具无法发现的卡死问题，需要用`查看当前调用栈`工具来定位到底卡死在哪个 PHP 函数了，当前的调用堆栈是什么。\n\n## 性能分析\n\n是最直观的一种性能分析方式，因为他可以生成一整张的调用图，他的原理是拦截所有的 PHP 函数调用，并且在开始和结束打点取时间差。\n\n它是非常好的`定位hot函数`的工具，方便的定位到最耗时的函数是哪个，但是无法看到调用栈，也不知道具体的系统调用，每次调用的耗时也不知道。\n\n## 到底该用哪个工具\n\n一般性能调优的话用`性能分析`工具就够用，生产环境突然产生了性能问题最先用性能分析查看，先大概定位问题，如果请求阻塞非常久（也就是卡死）可以直接用`查看当前调用栈`工具查看，如果请求只是变慢了就用`阻塞检测工具`。\n\n当然也可以挨个使用一遍，多维度发现问题。","meta":{"mtime":"2020-09-23T07:46:06+00:00"}},"options":{"poweredBy":{"name":"顶想云","link":"https:\/\/www.topthink.com"}}}
</script>

    <script src="asset/lodash/lodash.min.js?v=4.17.21"></script>

    <script src="asset/react/react.production.min.js?v=18.2.0"></script>

    <script src="asset/react-dom/react-dom.production.min.js?v=18.2.0"></script>

    <script src="asset/reader/index.js?v=1.0.66-alpha.7+5dae540"></script>

    <script src="asset/plugins/highlight/index.js?v=1.0.4"></script>

    <script src="asset/plugins/image-zoom/index.js?v=0.0.1"></script>

    <script src="asset/plugins/theme-default/index.js?v=1.0.30"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
