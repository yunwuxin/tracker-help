{"version":3,"file":"183-61a3d8.js","mappings":"mXAGMA,EAAwB,oBAAXC,OAAyB,KAAOA,OAC7CC,EAAa,WAAH,YACgB,IAA3BF,EAAeG,QACTH,EAAeG,aACgB,IAA/BH,EAAeI,YACZ,EACCJ,EAAeI,WAAW,EAazC,QAX+B,WAAqB,IAApBC,EAAGC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAElCG,GAAkCC,EAAAA,EAAAA,WAAS,kBAAMR,GAAY,IAACS,EAAAC,IAAAH,EAAA,GAAvDI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GAExBI,GAAkBC,EAAAA,EAAAA,KAAY,WAChCF,EAAaZ,IACjB,GAAGG,GAEH,OADAY,EAAAA,EAAAA,IAASjB,EAAK,SAAUe,GACjBF,CACX,ECpBA,IAAIK,EACJ,SAASC,IAAiS,OAApRA,EAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIlB,UAAUC,OAAQiB,IAAK,CAAE,IAAIC,EAASnB,UAAUkB,GAAI,IAAK,IAAIE,KAAOD,EAAcL,OAAOO,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,GAAU,CAAE,OAAOH,CAAQ,EAAUJ,EAASW,MAAMC,KAAMzB,UAAY,CAElV,IAAI0B,EAAW,SAAkBC,GAC/B,OAAoB,gBAAoB,MAAOd,EAAS,CACtDe,UAAW,kBACXC,QAAS,gBACTC,MAAO,6BACPC,MAAO,IACPC,OAAQ,KACPL,GAAQf,IAAUA,EAAqB,gBAAoB,OAAQ,CACpEqB,EAAG,wVAEP,E,4lBCGA,IAAMC,EAAW,SAAHC,GAAyD,IAA3CC,EAAOD,EAAPC,QAASC,EAAQF,EAARE,SAAUC,EAAOH,EAAPG,QACrCC,GAAOC,EAAAA,EAAAA,KAAA,KAAGF,QAASA,EAAOD,SAAGA,IAEnC,GAAID,EAAS,CACT,IAOIT,EAPEc,EAAsC,CACxCC,UAAW,OACXC,oBAAqB,SAACC,GAClB,OAAOA,EAAIC,eAAiBC,SAASC,IACzC,GAYJ,OAPIpB,EADmB,WAAnBqB,IAAOZ,IAAwBA,EAAQd,eAAe,WAC9Cc,EAEA,CACJa,QAASb,IAIVI,EAAAA,EAAAA,KAACU,EAAAA,EAAOC,EAAAA,EAAAA,EAAA,GACPV,GACAd,GAAK,IAAAU,SAERE,I,CAIT,OAAOA,CACX,EAOc,SAAUa,EAAIC,GAAyB,IAAtBzB,EAASyB,EAATzB,UAI3B,MAAa,YAFA0B,EAAAA,EAAAA,KAGF,MAGJC,EAAAA,EAAAA,MAACC,EAAS,CAAC5B,UAAWA,EAASS,SAAA,EAClCG,EAAAA,EAAAA,KAACiB,EAAS,KACVjB,EAAAA,EAAAA,KAACkB,EAAAA,GAAoB,CAACC,KAAM,iBAAkBC,UAAW1B,MAEjE,CAEA,IAAMsB,EAAYK,EAAAA,GAAAA,IAAUC,IAAAA,EAAAC,IAAA,kxBAsCtBN,EAAY,WAEd,IAAMO,GAAOC,EAAAA,EAAAA,MAEPC,GAAWC,EAAAA,EAAAA,cAAY,WACzB,IAAMC,EAAQtB,SAASuB,gBACnBC,EAAUF,EAAM7D,WAAa6D,EAAMG,WAAa,GAEhDD,EAAU,IACV3E,OAAO6E,SAAS,EAAGF,EAAU,IAC7BG,WAAWP,EAAU,GAE7B,GAAG,IAIH,OAFkBQ,IAEF,KACLlC,EAAAA,EAAAA,KAACN,EAAQ,CACZE,QAAS4B,EAAKW,cACV,CAAAC,GAAA,SAAEC,eAAgB,CAAF,yBAEpBvC,QAAS4B,EAAQ7B,UACpBG,EAAAA,EAAAA,KAACsC,EAAS,MAER,IACX,C","sources":["webpack://@topwrite/reader/./src/lib/use-window-scroll.ts","webpack://@topwrite/reader/./src/images/gotop.svg","webpack://@topwrite/reader/./src/components/menu.tsx"],"sourcesContent":["import { useThrottle, useEvent } from '@topwrite/common';\r\nimport { useState } from 'react';\r\n\r\nconst win = typeof window === 'undefined' ? null : window;\r\nconst getScrollY = (): number =>\r\n    (win as Window).scrollY !== void 0\r\n        ? (win as Window).scrollY\r\n        : (win as Window).pageYOffset === void 0\r\n            ? 0\r\n            : (win as Window).pageYOffset;\r\n\r\nexport const useWindowScroll = (fps = 30): number => {\r\n\r\n    const [scrollTop, setScrollTop] = useState(() => getScrollY());\r\n\r\n    const updateScrollTop = useThrottle(() => {\r\n        setScrollTop(getScrollY());\r\n    }, fps);\r\n    useEvent(win, 'scroll', updateScrollTop);\r\n    return scrollTop;\r\n};\r\n\r\nexport default useWindowScroll;\r\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgGotop = function SvgGotop(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"gotop_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 200,\n    height: 200\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M484.539 297.401 78.509 703.407c-11.785 11.813-11.785 30.912 0 42.724 11.816 11.815 30.94 11.815 42.757 0L507.477 359.95l379.83 379.806c11.455 11.483 30.04 11.483 41.493 0 11.51-11.454 11.51-30.039 0-41.516L534.373 303.777c-1.544-1.54-3.418-2.297-5.2-3.413-.693-.935-1.056-2.086-1.934-2.963-11.784-11.784-30.912-11.784-42.695 0h-.005zm0 0\"\n  })));\n};\nexport { SvgGotop as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB0PSIxNjU2NTc2OTMwMTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIzOTMiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNDg0LjUzODU1NSAyOTcuNDAxNDM0IDc4LjUwODA1MiA3MDMuNDA3Mzc4Yy0xMS43ODQzOTQgMTEuODEzMDQ3LTExLjc4NDM5NCAzMC45MTIwMzQgMCA0Mi43MjQwNTcgMTEuODE3MTQgMTEuODE0MDcgMzAuOTQxNzEgMTEuODE0MDcgNDIuNzU3ODI2IDBsMzg2LjIxMTEwOS0zODYuMTgxNDMzIDM3OS44MzA3OTUgMzc5LjgwNjIzNWMxMS40NTM4NjYgMTEuNDgyNTE5IDMwLjAzOTE1MyAxMS40ODI1MTkgNDEuNDkxOTk2IDAgMTEuNTExMTcxLTExLjQ1Mzg2NiAxMS41MTExNzEtMzAuMDM5MTUzIDAtNDEuNTE2NTU2TDUzNC4zNzI1NDMgMzAzLjc3NjYzMWMtMS41NDMxNDYtMS41MzkwNTMtMy40MTc4NDMtMi4yOTYyOTktNS4yMDA0NDItMy40MTI3MjYtMC42OTE3NTUtMC45MzUzMDItMS4wNTUwMjktMi4wODU0OTgtMS45MzMwMjUtMi45NjI0NzEtMTEuNzg0Mzk0LTExLjc4NDM5NC0zMC45MTIwMzQtMTEuNzg0Mzk0LTQyLjY5NTQwNSAwTDQ4NC41Mzg1NTUgMjk3LjQwMTQzNHpNNDg0LjUzODU1NSAyOTcuNDAxNDM0IiBwLWlkPSIyMzk0Ij48L3BhdGg+PC9zdmc+DQo=\";","import { InjectedComponentSet, styled, useIntl } from '@topwrite/common';\nimport { ComponentProps, ReactNode, useCallback } from 'react';\nimport useWindowScroll from '../lib/use-window-scroll';\nimport { ReactComponent as GotopIcon } from '../images/gotop.svg';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport useWindowSize from '../lib/use-window-size';\n\ntype TooltipProps = ComponentProps<typeof Tooltip>;\n\nexport interface MenuItemProps {\n    tooltip?: TooltipProps['overlay'] | TooltipProps;\n    children: ReactNode;\n    onClick?: () => void;\n}\n\nconst MenuItem = function({ tooltip, children, onClick }: MenuItemProps) {\n    const item = <a onClick={onClick}>{children}</a>;\n\n    if (tooltip) {\n        const defaultProps: Partial<TooltipProps> = {\n            placement: 'left',\n            getTooltipContainer: (dom) => {\n                return dom.parentElement || document.body;\n            }\n        };\n\n        let props: TooltipProps;\n        if (typeof tooltip === 'object' && tooltip.hasOwnProperty('overlay')) {\n            props = tooltip as TooltipProps;\n        } else {\n            props = {\n                overlay: tooltip as TooltipProps['overlay']\n            };\n        }\n\n        return <Tooltip\n            {...defaultProps}\n            {...props}\n        >\n            {item}\n        </Tooltip>;\n    }\n\n    return item;\n};\n\n\nexport interface MenuProps {\n    className?: string;\n}\n\nexport default function Menu({ className }: MenuProps) {\n\n    const size = useWindowSize();\n\n    if (size === 'mobile') {\n        return null;\n    }\n\n    return <Container className={className}>\n        <GotopItem />\n        <InjectedComponentSet role={'page:menu:item'} component={MenuItem} />\n    </Container>;\n}\n\nconst Container = styled.div`\n\n  position: fixed;\n  right: 24px;\n  bottom: 48px;\n  z-index: 400;\n  display: flex;\n  flex-direction: column-reverse;\n\n  a {\n    width: 42px;\n    height: 42px;\n    background: #FFFFFF;\n    box-shadow: 0 1px 4px -2px rgb(0 0 0 / 13%), 0 2px 8px rgb(0 0 0 / 8%), 0 8px 16px 4px rgb(0 0 0 / 4%);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    cursor: pointer;\n    margin-top: 16px;\n    color: #585a5a;\n\n    svg {\n      width: 20px;\n      height: 20px;\n      fill: currentColor;\n    }\n\n    html[data-theme=dark] & {\n      background-color: #1a1a1a;\n      color: #e8e8e8;\n      border: 1px solid rgba(235, 235, 235, 0.15);\n      box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.24);\n    }\n  }\n\n`;\n\nconst GotopItem = function() {\n\n    const intl = useIntl();\n\n    const scrollUp = useCallback(() => {\n        const frame = document.documentElement;\n        let pageTop = frame.scrollTop - (frame.clientTop || 0);\n\n        if (pageTop > 0) {\n            window.scrollTo(0, pageTop - 30);\n            setTimeout(scrollUp, 2);\n        }\n    }, []);\n\n    const scrollTop = useWindowScroll();\n\n    if (scrollTop > 500) {\n        return <MenuItem\n            tooltip={intl.formatMessage(\n                { defaultMessage: `回到顶部` }\n            )}\n            onClick={scrollUp}\n        ><GotopIcon /></MenuItem>;\n    }\n    return null;\n};\n"],"names":["win","window","getScrollY","scrollY","pageYOffset","fps","arguments","length","undefined","_useState","useState","_useState2","_slicedToArray","scrollTop","setScrollTop","updateScrollTop","useThrottle","useEvent","_path","_extends","Object","assign","bind","target","i","source","key","prototype","hasOwnProperty","call","apply","this","SvgGotop","props","className","viewBox","xmlns","width","height","d","MenuItem","_ref","tooltip","children","onClick","item","_jsx","defaultProps","placement","getTooltipContainer","dom","parentElement","document","body","_typeof","overlay","Tooltip","_objectSpread","Menu","_ref2","useWindowSize","_jsxs","Container","GotopItem","InjectedComponentSet","role","component","styled","_templateObject","_taggedTemplateLiteral","intl","useIntl","scrollUp","useCallback","frame","documentElement","pageTop","clientTop","scrollTo","setTimeout","useWindowScroll","formatMessage","id","defaultMessage","GotopIcon"],"sourceRoot":""}